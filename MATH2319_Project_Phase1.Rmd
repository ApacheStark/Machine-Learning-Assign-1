---
title: "MATH2319_Assignment_Part1"
author: "Margaret Cuddihy (s3608125)"
date: "8 April 2019"
output: 
   html_document:
      toc: true
      toc_depth: 3
  
---
# Introduction

#### The data set chosen for machine learning training is Google advertising data. 

The data set was made available on Kaggle as part of the MATH2319 competition and was accessed from the following link:
https://www.kaggle.com/c/machine-learning-battle-mlmath2319/data

#### Goal
By training a machine learning algorithm to the descriptive features in the dataset, the target feature, a revenue metric labelled as y, can be predicted. Hence, the purpose of training a machine learning algorithm is that Google will be able to better predict the advertising specifications that optimise returns on clicks and potentially improve revenue returns.

#### Description of the Data Set
The dataset instances are comprised of website traffic records from around the world. Descriptive features include:
<ul> <li>	companyId: - Company ID of record (categorical)
<li>	countryId: - Country ID of record (categorical)
<li>	deviceType: - Device type of record (categorical corresponding to desktop, mobile, tablet)
<li>	day: -Day of record (integer between 1 (oldest) and 30 for train, 31 and 35 (most recent) for test)
<li>	dow: - Day of week of the record (categorical)
<li>	price1, price2, price3: - Price combination for the record set by the company (numeric)
<li>	ad_area: - area of advertisement (normalized between 0 and 1)
<li>	ad_ratio: - ratio of advertisement's length to its width (normalized between 0 and 1)
<li>	requests, impression, cpc, ctr, viewability: - Various metrics related to the record (numeric)
<li>	ratio1 - ratio5: - Ratio characteristics related to the record (each normalized between 0 and 1)
<li>	y (target feature): - revenue-related metric (numeric)
The currency features are in US Dollars.

#### Structure of Phase 1
First, the data will be inspected, and any necessary pre-processing will be undertaken to ensure the data set is clean and ready for modelling.
1.	Data structure and dimensions will be determined
2.	Data will be checked for any missing or special values which will be appropriately imputed
3.	Data will be checked for outliers which will be handled as necessary
Second, the descriptive features of the data will be explored in order to identify significant relationships between features that will guide the machine learning modelling. For instance, descriptive features with strong correlation may be redundant to predictive modelling.
1.	Distribution of descriptive feature levels will be examined
2.	Correlation between descriptive features will be calculated
3.	Correlation between descriptive features and the target feature will be calculated
The aim of this is to identify the descriptive features most useful for predicting the target variable, the revenue metric y.


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Packages
```{r echo=TRUE}
 library(dplyr)
# library(tidyr)
 library(knitr)
# library(mlr)
# library(outliers)
library(ggplot2)

```
# Reading and Inspecting the Data
```{r echo=TRUE}

advertising_train <- read.csv("~/Uni/Machine Learning/advertising_train.csv", header = TRUE, stringsAsFactors = FALSE)

head(advertising_train)
tail(advertising_train)
dim(advertising_train)
str(advertising_train)
names(advertising_train)
class(advertising_train)
```

## Target Feature
y: numeric revenue-related metric

## Unique Identifier
Case ID: categorical

## Descriptive Features
1. Company ID: categorical 
2. Country ID: categorical
3. Device Type: categorical (Corresponding to Desktop, Mobile, Table and unknown? Unique values = 1,2,3 and 5 )
4. Day: integer (Day 1 to Day 30 in training data)
5. DOW: categorical (day of the week)
6. Price 1 (numeric)
7. Price 2 (numeric)
8. Price 3 (numeric)
9. Ad Area (normalised between 1 and 0)
10. Ad Ratio (normalised between 1 and 0)
11. Requests (numeric)
12. Impression (numeric)
13. CPC (numeric)
14. CTR (numeric)
15. Viewability (numeric)
16. Ratio 1 (normalised between 1 and 0)
17. Ratio 2 (normalised between 1 and 0)
18. Ratio 3 (normalised between 1 and 0)
19. Ratio 4 (normalised between 1 and 0)
20. Ratio 5 (normalised between 1 and 0)

214,218 Instances

# Cleaning and Preparing Data

```{r echo=TRUE}
kable(summary(advertising_train))

advertising_train %>% group_by(ad_ratio) %>% summarize(count=n())
```

## Special Values

### Missing
```{r}
which(is.na(advertising_train)) 

# No missing values detected
```

### Special
```{r}
# Check for special values
is.special <- function(x){
  if (is.numeric(x)) !is.finite(x)
}

sapply(advertising_train, is.special)

# No special values detected
```

## Outliers

### Univariate
```{r}

#Categorical Features 

#--------------------[Company]----------------------#

company <- advertising_train %>% 
    group_by(companyId) %>% 
    summarize(count=n())

company %>% 
    ggplot(aes(x = companyId, y = count)) +
    geom_col()

#Not sure about this one, looks weird. Would like to do more of a bar plot but the no of observations makes it difficult. 


#--------------------[Country]----------------------#

country <- advertising_train %>% 
    group_by(countryId) %>% 
    summarize(count=n())

country %>% 
    ggplot(aes(x = countryId, y = count)) +
    geom_col()


#If only we knew...what the country IDs stood for!!!

#--------------------[Device Type]----------------------#

device <- advertising_train %>% 
    group_by(deviceType) %>% 
    summarize(count=n())

device %>% 
    ggplot(aes(x = deviceType, y = count)) +
    geom_col()

#My guess was that device type was like 1 = tablet, 2 = phone, 3 = computer but I'm not sure?

#--------------------[Day of Week]----------------------#

day.of.week <- advertising_train %>% 
    group_by(dow) %>% 
    summarize(count=n())

day.of.week %>% 
    ggplot(aes(x = dow, y = count)) +
    geom_col()

#Saturday and Sunday most number of records




#Numeric Features

#--------------------[Day]----------------------#

summary(advertising_train$day)
day <- advertising_train %>% 
    group_by(day) %>% 
    summarize(count=n())

hist(advertising_train$day)
boxplot(advertising_train$day)

#Fairly uniform distribution, bit lower at start of training period

#--------------------[Price 1]----------------------#


price1 <- advertising_train$price1
summary(price1)

advertising_train %>% 
    group_by(price1) %>% 
    summarize(count=n())

hist(price1)
boxplot(price1)

#Vast majority is 0 - 0.01?? All the outliers...

#--------------------[Price 2]----------------------#


price2 <- advertising_train$price2
summary(price2)

advertising_train %>% 
    group_by(price2) %>% 
    summarize(count=n())

hist(price2)
boxplot(price2)

#Vast majority is 0

#--------------------[Price 3]----------------------#

price3 <- advertising_train$price3
summary(price3)

advertising_train %>% 
    group_by(price3) %>% 
    summarize(count=n())

hist(price3)
boxplot(price3)

#Vast majority is 0

#--------------------[Ad Area]----------------------#


adar <- advertising_train$ad_area
summary(adar)

advertising_train %>% 
    group_by(ad_area) %>% 
    summarize(count=n())

hist(adar)
boxplot(adar)

#Most instances of ad area are 0.0001., Max is 36 - thought this was normalised between 0 and 1?

#--------------------[Ad Ratio]----------------------#


adra <- advertising_train$ad_ratio
summary(adra)

#Max is 5 and yet it's meant to be normalised between 0 and 1?

advertising_train %>% 
    group_by(ad_ratio) %>% 
    summarize(count=n())

hist(adra)
boxplot(adra)

#Think we can play around with the binning for this maybe?

#--------------------[Requests]----------------------#


reqs <- advertising_train$requests
summary(reqs)

advertising_train %>% 
    group_by(requests) %>% 
    summarize(count=n())

hist(reqs)
boxplot(reqs)

#Oh lordy...

#--------------------[Impression]----------------------#


imp <- advertising_train$impression
summary(imp)

advertising_train %>% 
    group_by(impression) %>% 
    summarize(count=n())

hist(imp)
boxplot(imp)

#--------------------[CPC - Cost per click]----------------------#


cpc <- advertising_train$cpc
summary(cpc)

advertising_train %>% 
    group_by(cpc) %>% 
    summarize(count=n())

hist(cpc)
boxplot(cpc)


#--------------------[CTR - click through rate]----------------------#


ctr <- advertising_train$ctr
summary(ctr)

advertising_train %>% 
    group_by(ctr) %>% 
    summarize(count=n())

hist(ctr)
boxplot(ctr)


#--------------------[Viewability]----------------------#


view <- advertising_train$viewability
summary(view)

advertising_train %>% 
    group_by(viewability) %>% 
    summarize(count=n())

hist(view)
boxplot(view)


#--------------------[Ratio 1]----------------------#

summary(advertising_train$ratio1)

advertising_train %>% 
    group_by(ratio1) %>% 
    summarize(count=n())

hist(advertising_train$ratio1)
boxplot(advertising_train$ratio1)

#--------------------[Ratio 2]----------------------#

summary(advertising_train$ratio2)

advertising_train %>% 
    group_by(ratio2) %>% 
    summarize(count=n())

hist(advertising_train$ratio2)
boxplot(advertising_train$ratio2)

#--------------------[Ratio 3]----------------------#

summary(advertising_train$ratio3)

advertising_train %>% 
    group_by(ratio3) %>% 
    summarize(count=n())

hist(advertising_train$ratio3)
boxplot(advertising_train$ratio3)

#--------------------[Ratio 4]----------------------#

summary(advertising_train$ratio4)

advertising_train %>% 
    group_by(ratio4) %>% 
    summarize(count=n())

hist(advertising_train$ratio4)
boxplot(advertising_train$ratio4)

#--------------------[Ratio 5]----------------------#

summary(advertising_train$ratio5)

advertising_train %>% 
    group_by(ratio5) %>% 
    summarize(count=n())

hist(advertising_train$ratio5)
boxplot(advertising_train$ratio5)

#Hmmm very interesting, if only we knew what these were ratios of!


#--------------------[Target Variable (y)]----------------------#

summary(advertising_train$y)

advertising_train %>% 
    group_by(y) %>% 
    summarize(count=n())

hist(advertising_train$y)
boxplot(advertising_train$y)

```

### Multivariate
```{r}


```

# Visualisation

## Bivariate Visuals with Respect to Target Feature
```{r}


```


## Multivariate Visuals with Respect to Target Feature
```{r}

```

# Statistical Investigation

## Linear Correlations
```{r}

```

